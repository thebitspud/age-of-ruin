let addHeader=function(e){return`<p class="header">${e}</p><hr class="header">`},addButton=function(e,t){return`<button class="option" onclick="${e}">${t}</button>`};$(function(){displayPlayer(),displayInventory(),$("#history").append(addHeader("HISTORY")),$("#inspect").append(addHeader("INFO")),playEvent(events["intro-0"])});const items={berries:{type:"consumable",name:"Berries",weight:2,desc:"A fistful of edible berries that can be eaten to restore some health.",effect:"+7 HP over 15s"},"blunt-dagger":{type:"weapon",name:"Blunt Dagger",weight:3,desc:"A small but functional dagger that has been used many times in the past.",damage:6,size:"secondary"},error:{type:"debug",name:"Missing Item",weight:0,desc:"That item could not be accessed. Please report this issue to <a href='https://github.com/thebitspud/age-of-ruin/issues' target='_blank' rel='noopener'>the developer.</a>"},"healing-salve":{type:"consumable",name:"Healing Salve",weight:2,desc:"A potent herbal blend that can disinfect and heal lesser wounds in no time.",effect:"+15 HP over 10s"},none:{type:"debug",name:"None",weight:0,desc:"You were not supposed to be able to access this item. Please report this issue to <a href='https://github.com/thebitspud/age-of-ruin/issues' target='_blank' rel='noopener'>the developer.</a>"},"small-pack":{type:"equipable",name:"Small Backpack",weight:8,desc:"A small pack that can be worn to increase your inventory weight cap.",section:"Back"},"tali-life":{type:"accessory",name:"Talisman of Life",weight:3,desc:"This golden artifact is covered with strange inscriptions. When held, it radiates a pleasant energy.",effect:"+1 HP every 3s"}};let inventory=[],itemLink=function(e){return`<button style="color: green" onClick="inspectItem('${e.name}')">${e.name}</button>`};function displayInventory(){let e=$("#inventory");e.empty().append(addHeader("INVENTORY"));let t=0,n=!1;for(let o=0;o<Object.keys(inventory).length;o++)e.append(`${itemLink(Object.values(inventory)[o])}<br>`),"Small Backpack"===Object.values(inventory)[o].name&&(n=!0),t+=Object.values(inventory)[o].weight;n&&(player.weight.max=100),player.weight.now=t,displayPlayer()}function acquireItem(e){e.weight+player.weight.now>player.weight.max||("None"===player.primary&&"weapon"===e.type&&(player.primary=itemLink(e)),inventory.push(e),$("#info").append(`Acquired ${itemLink(e)}<br><br>`),displayInventory())}function inspectItem(e){let t=items.error;for(let n=0;n<Object.keys(items).length;n++)Object.values(items)[n].name===e&&(t=Object.values(items)[n]);switch($inspect=$("#inspect"),$inspect.empty().append(addHeader("INFO")).append(`<p style="color: green; text-align: center">${t.name}</p>`).append(`<br>${t.desc}`).append(`<br><br>Weight: ${t.weight}`),t.type){case"weapon":$inspect.append(`<br>Damage: ${t.damage}`);break;case"consumable":case"accessory":$inspect.append(`<br>Effect: ${t.effect}`);break;case"equipable":$inspect.append(`<br>Section: ${t.section}`)}}const player={health:{max:100,min:0,now:100},energy:{max:100,min:0,now:100},weight:{max:25,min:0,now:0},str:{max:20,min:0,now:10},int:{max:20,min:0,now:10},agi:{max:20,min:0,now:10},cha:{max:20,min:0,now:10},primary:"None",secondary:"None"};function displayPlayer(){$("#player").empty().append(addHeader("PLAYER")).append(`Health : ${player.health.now} / ${player.health.max}`).append(`<br>Energy : ${player.energy.now} / ${player.energy.max}`).append(`<br>Weight : ${player.weight.now} / ${player.weight.max}`).append(`<br><br>Primary : ${player.primary}`).append(`<br>Secondary : ${player.secondary}`)}let addEventToggle=function(e,t){return addButton(`playEvent(events['${e}'])`,t)},pickUpItemPrompt=function(e,t){return addButton(`pickUpSuccess('${e}', '${t}')`,"Pick Up")+addButton(`discardItem('${e}', '${t}')`,"Discard")};const events={"intro-0":{info:"-cYou wake up and open your eyes.",options:addEventToggle("intro-1","Continue")},"intro-1":{info:"The ground you lie on is cold and uneven, but you can't help but admire the countless stars dotting the night sky above you.",options:addEventToggle("intro-2","Continue")},"intro-2":{info:"You sit up and look around, surveying the unfamiliar landscape.",options:addEventToggle("intro-3","Continue")},"intro-3":{info:"You can barely see the light of dawn off in the distance. Although it is still dark out, you can tell that you are in an unkempt grassy field. You do not know where you are or how you got here.",options:addEventToggle("intro-4","Inspect Area")},"intro-4":{info:"You spot a small dagger lying on the ground.",options:addButton("pickUpSuccess('intro-5', 'blunt-dagger')","Pick Up")},"intro-5":{info:"There appears to be nothing else of value in the region. Moving out of this area would be a good idea.<br><br>Behind you is a towering forest, but in the opposite direction you spot what appears to be a well used road.",options:addEventToggle("forest-0","To the Forest")+addEventToggle("road-0","To the Road")},"forest-0":{info:"-cYou cautiously approach the monumental forest, peering into the dark expanse beneath the canopy.",options:addEventToggle("forest-1","Inspect Area")},"forest-1":{info:"Along the edge of the forest, you spot some bright red berries growing on a nearby shrub.",options:pickUpItemPrompt("forest-2","berries")},"forest-2":{info:"There appears to be nothing else of value in the region.<br><br>You are about to turn around and head for the road when you spot a glinting object amongst the towering trees.",options:addEventToggle("forest-3","Into the Forest")+addEventToggle("road-0","To the Road")},"forest-3":{info:"You warily advance towards the object that caught your attention. Upon further inspection, it appears to be some sort of coin-shaped talisman.",options:pickUpItemPrompt("forest-4","tali-life")},"forest-4":{info:"There appears to be nothing else of value in the region.<br><br>Heading back to the road would be a good idea.",options:addEventToggle("road-0","To the Road")},"road-0":{info:"-cOccasional bunches of wild grasses starkly contrast the monotonous gravel of the road that surrounds them. In both directions, the winding path streches on as far as you can see.",options:addEventToggle("e-road-0","Turn Left")+addEventToggle("w-road-0","Turn Right")},"e-road-0":{info:"You turn left",options:addEventToggle("e-road-0","Turn Left")+addEventToggle("w-road-0","Turn Right")},"w-road-0":{info:"You turn right",options:addEventToggle("e-road-0","Turn Left")+addEventToggle("w-road-0","Turn Right")}};function playEvent(e){$info=$("#info"),evtInfo=e.info,evtInfo.startsWith("-c")&&($info.empty(),evtInfo=evtInfo.substr(2)),$info.append(evtInfo+"<br><br>"),$("#options").empty().append(e.options)}function pickUpSuccess(e,t){$("#options").empty().append(addEventToggle(e,"Continue")),acquireItem(items[t])}function discardItem(e,t){$("#info").append(`<span style="color: red">Discarded</span> ${itemLink(items[t])}<br><br>`),$("#options").empty().append(addEventToggle(e,"Continue"))}